# Agent-agnostic alias for agents-73-codex-belt-conveyor.
# Keeps the old filename working while new callers use this name.
name: Agents Belt Conveyor

on:
  workflow_call:
    inputs:
      agent_key:
        description: 'Agent key for this belt run'
        required: false
        default: 'codex'
        type: string
      issue:
        description: 'Source issue number'
        required: true
        type: number
      branch:
        description: 'Branch for the belt PR'
        required: true
        type: string
      pr_number:
        description: 'Pull request number'
        required: true
        type: number
      head_sha:
        description: 'Head SHA for status checks'
        required: false
        default: ''
        type: string
      dry_run:
        description: 'Preview actions without writes'
        required: false
        default: false
        type: boolean
    secrets:
      ACTIONS_BOT_PAT:
        required: false
      WORKFLOWS_APP_ID:
        required: false
      WORKFLOWS_APP_PRIVATE_KEY:
        required: false

permissions:
  contents: write
  pull-requests: write
  issues: write
  actions: write

jobs:
  delegate:
    uses: ./.github/workflows/agents-73-codex-belt-conveyor.yml
    with:
      agent_key: ${{ inputs.agent_key }}
      issue: ${{ inputs.issue }}
      branch: ${{ inputs.branch }}
      pr_number: ${{ inputs.pr_number }}
      head_sha: ${{ inputs.head_sha }}
      dry_run: ${{ inputs.dry_run }}
    secrets: inherit
