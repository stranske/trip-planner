# Wrapper workflow to allow workflow_dispatch for the Codex belt worker.
name: Agents 72 Codex Belt Worker Dispatch

on:
  workflow_dispatch:
    inputs:
      issue:
        description: 'Issue number'
        required: true
        type: string
      branch:
        description: 'Branch to prepare (codex/issue-<n>)'
        required: true
        type: string
      base:
        description: 'Base branch (defaults to repository default)'
        required: false
        default: ''
        type: string
      source:
        description: 'Source of the worker invocation'
        required: false
        default: 'manual-dispatch'
        type: string
      dry_run:
        description: 'Preview worker actions without writes'
        required: false
        default: false
        type: boolean
      use_step_branch:
        description: 'Allow fallback step branch when issue branch is stale'
        required: false
        default: false
        type: boolean
      max_parallel:
        description: 'Maximum concurrent worker runs permitted'
        required: false
        default: 1
        type: number
      keepalive:
        description: 'True when invocation originates from a keepalive sweep'
        required: false
        default: false
        type: boolean

permissions:
  contents: write
  issues: write
  pull-requests: write
  actions: write

jobs:
  run-worker:
    name: Run Codex belt worker
    runs-on: ubuntu-latest
    steps:
      - name: Fail because Codex belt worker workflow is missing
        run: |
          echo "Error: The reusable workflow '.github/workflows/agents-72-codex-belt-worker.yml' is not present in this repository."
          echo "This dispatch wrapper is disabled until the reusable workflow is added or the reference is updated."
          exit 1
